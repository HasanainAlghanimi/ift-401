{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hasan/ift-401/app/stocks/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\n\r\n/* ----------------------------- Types ----------------------------- */\r\n\r\ntype Stock = {\r\n  name: string;\r\n  symbol: string;\r\n  price: number;\r\n  changePct: number;\r\n  marketCap: number;\r\n  tradable: boolean;\r\n};\r\n\r\n/* ------------------------------ Utilities ------------------------------ */\r\n\r\ntype SortKey = 'name' | 'symbol' | 'price' | 'changePct' | 'marketCap';\r\n\r\nconst usd = (n: number) =>\r\n  n.toLocaleString('en-US', { style: 'currency', currency: 'USD' });\r\n\r\nconst cap = (n: number) =>\r\n  n >= 1e12\r\n    ? `${(n / 1e12).toFixed(2)}T`\r\n    : n >= 1e9\r\n    ? `${(n / 1e9).toFixed(2)}B`\r\n    : n >= 1e6\r\n    ? `${(n / 1e6).toFixed(2)}M`\r\n    : usd(n);\r\n\r\nconst pctf = (n: number) => `${n > 0 ? '+' : ''}${n.toFixed(2)}%`;\r\n\r\nfunction cmp(a: string | number, b: string | number) {\r\n  if (typeof a === 'string' && typeof b === 'string')\r\n    return a.localeCompare(b);\r\n  return (a as number) - (b as number);\r\n}\r\n\r\n/* ------------------------------- Component ------------------------------ */\r\n\r\nexport default function StocksPage() {\r\n  const [query, setQuery] = useState('');\r\n  const [tab, setTab] = useState<'tradable' | 'non'>('tradable');\r\n  const [sortKey, setSortKey] = useState<SortKey>('marketCap');\r\n  const [sortDir, setSortDir] = useState<'asc' | 'desc'>('desc');\r\n  const [stocks, setStocks] = useState<Stock[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  /* --------------------------- Fetch from API --------------------------- */\r\n\r\n  useEffect(() => {\r\n    const fetchStocks = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const res = await fetch('/api/stocks');\r\n        if (!res.ok) throw new Error(`Request failed with status ${res.status}`);\r\n\r\n        const data: Stock[] = await res.json();\r\n        setStocks(data);\r\n      } catch (err: any) {\r\n        console.error(err);\r\n        setError(err.message || 'Failed to load stocks');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStocks();\r\n  }, []);\r\n\r\n  /* ----------------------------- Sorting ----------------------------- */\r\n\r\n  const onSort = (key: SortKey) => {\r\n    if (key === sortKey)\r\n      setSortDir((d) => (d === 'asc' ? 'desc' : 'asc'));\r\n    else {\r\n      setSortKey(key);\r\n      setSortDir('desc');\r\n    }\r\n  };\r\n\r\n  /* ----------------------------- Filtering ----------------------------- */\r\n\r\n  const list = useMemo(() => {\r\n    const q = query.trim().toLowerCase();\r\n\r\n    const filtered = stocks.filter((s) => {\r\n      const inTab =\r\n        tab === 'tradable' ? s.tradable : !s.tradable;\r\n\r\n      const inQuery =\r\n        !q ||\r\n        s.name.toLowerCase().includes(q) ||\r\n        s.symbol.toLowerCase().includes(q);\r\n\r\n      return inTab && inQuery;\r\n    });\r\n\r\n    const dir = sortDir === 'asc' ? 1 : -1;\r\n\r\n    return [...filtered].sort(\r\n      (a, b) => cmp(a[sortKey], b[sortKey]) * dir\r\n    );\r\n  }, [stocks, query, tab, sortKey, sortDir]);\r\n\r\n  /* ------------------------------ Render ------------------------------ */\r\n\r\n  return (\r\n    <main className=\"container stocks\">\r\n      {/* Header / Search */}\r\n      <header className=\"pageheader\" aria-labelledby=\"stocks-title\">\r\n        <div>\r\n          <h1 id=\"stocks-title\" className=\"stocks__title\">\r\n            Explore stocks\r\n          </h1>\r\n          <p className=\"stocks__sub\">\r\n            Search by name or symbol, then sort by price, today’s\r\n            change, or market cap.\r\n          </p>\r\n        </div>\r\n\r\n        <input\r\n          className=\"searchbar__input stocks__search\"\r\n          aria-label=\"Search by name or symbol\"\r\n          placeholder=\"Search name or symbol…\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n        />\r\n      </header>\r\n\r\n      {/* Loading / Error */}\r\n      {loading && <p>Loading stocks…</p>}\r\n      {error && !loading && (\r\n        <p style={{ color: 'red' }}>{error}</p>\r\n      )}\r\n\r\n      {/* Content */}\r\n      {!loading && !error && (\r\n        <>\r\n          {/* Tabs */}\r\n          <div\r\n            role=\"tablist\"\r\n            aria-label=\"Tradability filter\"\r\n            className=\"pillgroup\"\r\n          >\r\n            <button\r\n              role=\"tab\"\r\n              aria-selected={tab === 'tradable'}\r\n              className={`pillbtn ${\r\n                tab === 'tradable' ? 'is-active' : ''\r\n              }`}\r\n              onClick={() => setTab('tradable')}\r\n            >\r\n              Tradable\r\n            </button>\r\n\r\n            <button\r\n              role=\"tab\"\r\n              aria-selected={tab === 'non'}\r\n              className={`pillbtn ${\r\n                tab === 'non' ? 'is-active' : ''\r\n              }`}\r\n              onClick={() => setTab('non')}\r\n            >\r\n              Non-tradable\r\n            </button>\r\n          </div>\r\n\r\n          {/* Stocks Table */}\r\n          <section className=\"stocks-table\">\r\n            {/* Header */}\r\n            <div className=\"stocks-table__head\">\r\n              <button\r\n                onClick={() => onSort('name')}\r\n                className=\"stocks-table__headcell\"\r\n              >\r\n                Name\r\n              </button>\r\n              <button\r\n                onClick={() => onSort('symbol')}\r\n                className=\"stocks-table__headcell\"\r\n              >\r\n                Symbol\r\n              </button>\r\n              <button\r\n                onClick={() => onSort('price')}\r\n                className=\"stocks-table__headcell\"\r\n              >\r\n                Price\r\n              </button>\r\n              <button\r\n                onClick={() => onSort('changePct')}\r\n                className=\"stocks-table__headcell\"\r\n              >\r\n                Today\r\n              </button>\r\n              <button\r\n                onClick={() => onSort('marketCap')}\r\n                className=\"stocks-table__headcell\"\r\n              >\r\n                Market Cap\r\n              </button>\r\n              <div className=\"stocks-table__headcell\" />\r\n            </div>\r\n\r\n            {/* Body */}\r\n            <div className=\"stocks-table__body\">\r\n              {list.map((s) => (\r\n                <div\r\n                  className=\"stocks-table__row\"\r\n                  key={s.symbol}\r\n                >\r\n                  <div className=\"stocks-table__cell stocks-table__cell--name\">\r\n                    <strong>{s.name}</strong>\r\n                  </div>\r\n\r\n                  <div className=\"stocks-table__cell stocks-table__cell--symbol\">\r\n                    {s.symbol}\r\n                  </div>\r\n\r\n                  <div className=\"stocks-table__cell stocks-table__cell--num\">\r\n                    {usd(s.price)}\r\n                  </div>\r\n\r\n                  <div\r\n                    className={`stocks-table__cell stocks-table__cell--num ${\r\n                      s.changePct >= 0\r\n                        ? 'stocks-table__cell--up'\r\n                        : 'stocks-table__cell--down'\r\n                    }`}\r\n                  >\r\n                    {s.changePct >= 0 ? '▲' : '▼'}{' '}\r\n                    {pctf(s.changePct)}\r\n                  </div>\r\n\r\n                  <div className=\"stocks-table__cell stocks-table__cell--num\">\r\n                    {cap(s.marketCap)}\r\n                  </div>\r\n\r\n                  <div className=\"stocks-table__cell stocks-table__cell--actions\">\r\n                    <button\r\n                      className=\"iconbtn\"\r\n                      aria-label={`Add ${s.symbol} to watchlist`}\r\n                    >\r\n                      +\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </section>\r\n        </>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}